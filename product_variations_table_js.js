jQuery('#basics_btn').on('click',function(){jQuery('#columns_btn').removeClass('nav-tab-active');jQuery('#design_btn').removeClass('nav-tab-active');jQuery("#configuration_btn").removeClass("nav-tab-active");jQuery("#general_settings_tab").removeClass("nav-tab-active");jQuery("#basics_btn").addClass("nav-tab-active");jQuery('#basics_content').show();jQuery('#columns_content').hide();jQuery('#configuration_content').hide();jQuery('#design_content').hide();jQuery('#global_settings_div_container_admin').hide();});jQuery('#columns_btn').on('click',function(){jQuery("#basics_btn").removeClass("nav-tab-active");jQuery('#design_btn').removeClass('nav-tab-active');jQuery('#columns_btn').addClass('nav-tab-active');jQuery("#configuration_btn").removeClass("nav-tab-active");jQuery("#general_settings_tab").removeClass("nav-tab-active");jQuery('#columns_content').show();jQuery('#basics_content').hide();jQuery('#design_content').hide();jQuery('#configuration_content').hide();jQuery('#global_settings_div_container_admin').hide();});jQuery('#design_btn').on('click',function(){jQuery("#design_btn").addClass("nav-tab-active");jQuery('#columns_btn').removeClass('nav-tab-active');jQuery('#basics_btn').removeClass('nav-tab-active');jQuery("#configuration_btn").removeClass("nav-tab-active");jQuery("#general_settings_tab").removeClass("nav-tab-active");jQuery('#design_content').show();jQuery('#basics_content').hide();jQuery('#columns_content').hide();jQuery('#configuration_content').hide();jQuery('#global_settings_div_container_admin').hide();});jQuery('#configuration_btn').on('click',function(){jQuery("#configuration_btn").addClass("nav-tab-active");jQuery('#columns_btn').removeClass('nav-tab-active');jQuery('#basics_btn').removeClass('nav-tab-active');jQuery("#design_btn").removeClass("nav-tab-active");jQuery("#general_settings_tab").removeClass("nav-tab-active");jQuery('#configuration_content').show();jQuery('#basics_content').hide();jQuery('#columns_content').hide();jQuery('#design_content').hide();jQuery('#global_settings_div_container_admin').hide();});jQuery('#general_settings_tab').on('click',function(){jQuery("#general_settings_tab").addClass("nav-tab-active");jQuery('#columns_btn').removeClass('nav-tab-active');jQuery('#basics_btn').removeClass('nav-tab-active');jQuery("#design_btn").removeClass("nav-tab-active");jQuery("#configuration_btn").removeClass("nav-tab-active");jQuery('#global_settings_div_container_admin').show();jQuery('#configuration_content').hide();jQuery('#basics_content').hide();jQuery('#columns_content').hide();jQuery('#design_content').hide();});jQuery('#checkbox_to_enable_module_for_all_variables').on('change',(e)=>{if(jQuery('#checkbox_to_enable_module_for_all_variables').is(':checked')){jQuery('.the_div').slideDown('slow');}else{jQuery('.the_div').slideUp('slow');}});jQuery('#enable_global_settings_save_btn').on('click',function(){'use strict';var limit_pages_in_table=jQuery('#limit_pages_in_table').val();if(limit_pages_in_table==''){jQuery('#limiting_pages_p').fadeIn();jQuery('#limit_pages_in_table').css('border','1px solid red');return false;}else{jQuery('#limiting_pages_p').fadeOut();jQuery('#limit_pages_in_table').css('border','1px solid #32373c');}
jQuery('#global_stngs_msg').hide();var checkbox_to_enable_for_all_variables='no';var variation_table_products_list=jQuery('#variation_table_all_products').val();var excluded_categories_js=jQuery('#excluded_categories').val();var to_choose_radio=jQuery('#fma_variation_table_exclude_by_prods_or_cats_slct_bx').val();if(variation_table_products_list==null){variation_table_products_list=['null'];}
if(excluded_categories_js==null){excluded_categories_js=['null'];}
if(jQuery('#checkbox_to_enable_module_for_all_variables').is(':checked')){checkbox_to_enable_for_all_variables='yes';}else{checkbox_to_enable_for_all_variables='no';}
var columns_attributes_arr=[];jQuery('.global_settings_columns_checkbxs').each(function(){if(jQuery(this).is(':checked')){columns_attributes_arr.push(jQuery(this).attr('data-my-placeholder'));}});if(columns_attributes_arr.length==0&&jQuery('#checkbox_to_enable_module_for_all_variables').is(':checked')){alert('Please check at least one checkbox');return false;}
jQuery('.spinner').show();jQuery('.spinner').css('visibility','visible');console.log(columns_attributes_arr);console.log(checkbox_to_enable_for_all_variables);var limit_pages_in_table=jQuery('#limit_pages_in_table').val();var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'enable_module_for_all_variable_products',checkbox_to_enable_for_all_variables:checkbox_to_enable_for_all_variables,columns_attributes_arr:columns_attributes_arr,limit_pages_in_table:limit_pages_in_table,variation_table_products_list:variation_table_products_list,excluded_categories_js:excluded_categories_js,to_choose_radio:to_choose_radio},success:function(result){console.log('attributes=>'+result);setTimeout(function(){jQuery('.spinner').hide();jQuery('.spinner').css('visibility','hidden');jQuery('#global_stngs_msg').show();},50);},error:function(status,xhr){console.log(status);}});});jQuery('.my_first_div').attr('title','You can drag/drop this box to order the columns according to your choice');jQuery(function(){if(jQuery('#if_enable_all_selected').val()=='enable_all'){console.log('yes');jQuery('.export_btns').each(function(){jQuery(this).attr('disabled',true);});}});jQuery(function(){jQuery('#enable_all').on('change',function(){if(jQuery('#enable_all').is(':checked')){jQuery('.export_btns').attr('disabled',true);jQuery('.export_btns').attr('checked',false);}else{jQuery('.export_btns').attr('disabled',false);}});});jQuery('#save_export_btns').on('click',function(e){e.preventDefault();e.stopImmediatePropagation();if(jQuery('#export_table input:checkbox:checked').length>0){if(jQuery('#enable_all').is(':checked')){enable_all=jQuery('#enable_all').val();console.log(enable_all);var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'enable_all',enable_all:enable_all,},success:function(enable_all){console.log('in enable all');console.log(enable_all);},error:function(status,xhr){console.log(status);}});}else{var export_btns=[];jQuery('.export_btns').each(function(){if(jQuery(this).is(':checked')){export_btns.push(jQuery(this).val());}});console.log(export_btns);var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'enable_all',export_btns:export_btns,},success:function(result){console.log('in export buttons');jQuery('#export_btns_msg').fadeIn();console.log(result);},error:function(status,xhr){console.log(status);}});}}else{console.log(export_btns);if(export_btns==undefined){var aVariable='enableNone';console.log('comes here when there is nothing selected');var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'enable_all',aVariable:aVariable,},success:function(result){console.log(result);console.log('enable None');jQuery('#export_btns_msg').fadeIn();},error:function(status,xhr){console.log(status);}});}}});jQuery(function(){jQuery("#sortable1, #sortable2").sortable({connectWith:".my_new",}).disableSelection();});var checker='';jQuery(function(){jQuery('#sortable1, #sortable2').sortable({axis:'x,y',stop:function(e,ui){var arr=[];var items=jQuery('.my_new').find('li');for(var i=0;i<items.length;i++){var name=jQuery(items).eq(i).find('.only_texts').attr('placeholder');arr.push(name);}
console.log(arr);var product_id=jQuery('#product_id_for_my_new').val();var ajaxurl=ewcpm_php_vars.admin_url;var checker=true;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'store_sorted_data_to_db',arr:arr,product_id:product_id,checker:checker},success:function(result){console.log(result);},error:function(status,xhr){console.log(status);}});},drop:function(){var order=jQuery(".my_new").sortable("serialize",{key:'order[]'});}});});jQuery('#publish').on('click',function(e){var all_checkboxes=[];jQuery('.checkys').each(function(){if(jQuery(this).is(':checked')==true){all_checkboxes.push(jQuery(this).attr('value'));}});var all_elements_without_drag=[];jQuery('.my_new').find('li .only_texts').each(function(){all_elements_without_drag.push(jQuery(this).attr('placeholder'));});var product_id=jQuery('#product_id_for_my_new').val();var ajaxurl=ewcpm_php_vars.admin_url;console.log(all_checkboxes);jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'after_clicking_update_ajax',all_checkboxes:all_checkboxes,product_id:product_id,all_elements_without_drag:all_elements_without_drag,checker:checker},success:function(result){console.log(result);},error:function(status,xhr){console.log(status);}});});function dim_or_show_the_checky(){jQuery('.checkboxes').on('change',function(){var checkbox_id=this.id;if(this.checked)
{jQuery('#id'+checkbox_id).attr("readonly",false);jQuery('#id'+checkbox_id).css({'opacity':2.4});}
else
{jQuery('#id'+checkbox_id).attr("readonly",true);jQuery('#id'+checkbox_id).css({'opacity':0.4});}});}
jQuery(document).ready(function(){showHideQty();var modal=document.getElementById("myModal");var span=document.getElementsByClassName("close")[0];jQuery('.myImg').click(function(){var newSrc=jQuery(this).attr('large_src');jQuery("#img01").attr('src',newSrc);modal.style.display="block";jQuery('span').on('click',function(){modal.style.display='none';});});window.onclick=function(event){if(event.target==modal){modal.style.display="none";}}
jQuery('#my_own_table').css('width','100%');jQuery('.my_new').find('li').each(function(){jQuery(this).hover(function(){jQuery(this).css('cursor','move');});});});function show_qty_via_ajax(var_id){var vari_id=var_id;var ajaxurl=ewcpm_php_vars.admin_url;setTimeout(function(){jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'show_qty_above_add_to_cart',vari_id:vari_id,},success:function(result){jQuery('#qty'+var_id).html(result);showHideQty();}});},3000);}
function showHideQty(){jQuery('.qtyy').each(function(){var ElementQty=jQuery(this).html();if(parseInt(ElementQty)>0){jQuery(this).fadeIn('slow');}else{jQuery(this).css('display','none');}});}
jQuery(document).on('click','.remove',function(e){setTimeout(function(){var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'when_cart_is_going_to_remove',},success:function(result){var toShow=JSON.parse(result);var qtyyArray=[];jQuery('.qtyy').each(function(){var id=jQuery(this).attr('id');id=id.slice(3);qtyyArray.push(parseInt(id));});for(var i=0;i<qtyyArray.length;i++){for(var j=0;j<toShow.length;j++){if(parseInt(qtyyArray[i])==parseInt(toShow[j])){qtyyArray.splice(i,1);}}}
for(var i=0;i<qtyyArray.length;i++){if(jQuery('#qty'+qtyyArray[i]).html()>0){jQuery('#qty'+qtyyArray[i]).html('');}}
showHideQty();}});},300)});jQuery(document).ready(function(){jQuery('#my_own_table_filter input').attr('placeholder','Filter here...');jQuery('#my_own_table_filter input').css('margin-bottom','2%');if(jQuery('#my_own_table_filter').length){jQuery('#my_own_table thead tr:eq(1) th').each(function(i){var title=jQuery(this).text();jQuery(this).html('<input type="text" placeholder="Search '+title+'" />');jQuery('#my_own_table_filter',this).on('keyup change',function(){if(table.column(i).search()!==this.value){table.column(i).search(this.value).draw();}});});var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'check_what_buttons_are_set_from_backend',},success:function(result){console.log('enable all expected =>'+result);console.log(result['fma_the_pages']);if(result==='"enable_all"'||result==='false'){return false;}else if(result=='enableNone'){return false;}else{console.log(jQuery('#enable_none').attr('value'));console.log('stil here');var my_result=JSON.parse(result);console.log(my_result);var new_arr=[];for(var i=0;i<my_result.length;i++){new_arr.push(my_result[i]);}
console.log(new_arr);jQuery('.dt-button').each(function(){if(!new_arr.includes(jQuery(this).attr('class').split(' ')[1])){jQuery(this).css('display','none');}});}}});var fma_cs_limit_pages=parseInt(jQuery('#fma_cs_limit_pages').val());var fma_limit_pages=jQuery('#fma_variation_table_limit_page').val();fma_limit_pages=parseInt(fma_limit_pages);is_admin_or_not=jQuery('.is_admin').val();if(is_admin_or_not!='true'){var table=jQuery('#my_own_table').DataTable({dom:'Bfrtip',pageLength:fma_cs_limit_pages,pageLength:fma_limit_pages,bRetrieve:true,responsive:true,buttons:['print','copyHtml5','excelHtml5','csvHtml5',{extend:'pdfHtml5',orientation:'landscape',pageSize:'LEGAL'}],fixedColumns:true,orderCellsTop:true});table.buttons().container().appendTo('#tableActions');}}
jQuery('.buttons-copy ').click(function(){var total_rows=jQuery('#rows_in_table').val();swal(total_rows+" Rows Has been added to clipboard!");});show_hide_qtys_number();jQuery('#_variation_description').css('width','180px !important');});function show_hide_qtys_number(){var qtys=[];var i=0;jQuery('.my_quantity').each(function(){var qty=jQuery(this).val();qtys[i]=jQuery(this).val();i++});var j=0;jQuery('.product_quantity').each(function(){jQuery(this).attr('value',qtys[j]);j++;});}
jQuery('.add_to_cart_button').click(function(){var_id=jQuery(this).attr('data-product_id');var_id=parseInt(var_id);var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'show_message_when_add_to_cart',var_id:var_id,},success:function(result){result=result.replace('&#8211;','');setTimeout(function(){swal("Great!",result+' has been added to cart !',"success");},320);}});});var selectedOne=jQuery('#customize_design option:selected').val();if(selectedOne=='custom'){jQuery('#my_dsgn_tbl_form').show();}
jQuery('#customize_design').change(function(){var value=jQuery(this).val();if(value=='custom'){jQuery('#my_dsgn_tbl_form').show();}else if(value=='default'){jQuery('#my_dsgn_tbl_form').hide();}});jQuery('.product_quantity').on('keyup mouseup',function(){var updated_qty=jQuery(this).val();var var_id_for_qty=jQuery(this).attr('id');jQuery('.var_data button').each(function(){var id=jQuery(this).attr('id');if(var_id_for_qty==id){jQuery(this).attr('data-quantity',updated_qty);}});});jQuery('#right_button').on('click',function(){var var_ids=[];var i=0;jQuery('.checkboxess').each(function(){if(jQuery(this).is(":checked")){var_ids[i]=jQuery(this).attr('id');i++;}
else{console.log('no');}});console.log(var_ids);var counter=0;var qtys_arr=[];var j=0;jQuery('.product_quantity').each(function(){if(var_ids[counter]==jQuery(this).attr('id')){if(jQuery(this).val()==''){qtys_arr[j]=1;}else{qtys_arr[j]=jQuery(this).val();}
console.log('equals');counter++;j++;}});console.log(qtys_arr);var size=var_ids.length;jQuery('#qty_length').html(size);var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'add_multiple_to_cart',var_ids:var_ids,qtys_arr:qtys_arr},success:function(result){console.log(result);setTimeout(function(){if(size>1){swal('Great!',size+' Items added to cart');}else if(size==1){swal('Great!',size+' Item added to cart');}},200);setTimeout(function(){location.reload();},3000);}});});var i=0;jQuery('.checkboxess').click(function(){jQuery('#right_button').prop('disabled',!jQuery('.checkboxess:checked').length);});jQuery('#save_basics').on('click',function(e){e.preventDefault();jQuery(this).css('cursor','progress');var ajax_or_refresh=jQuery('.ajax_or_refresh').val();var add_to_cart_text=jQuery('#add_to_cart_text').val();var where_to_show_the_table=jQuery('#where_to_show_the_table').val();var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'save_basics',ajax_or_refresh:ajax_or_refresh,add_to_cart_text:add_to_cart_text,where_to_show_the_table:where_to_show_the_table},success:function(result){jQuery('#setting_msg_basics').fadeIn('slow');}});jQuery('#save_basics').hover(function(){jQuery(this).css('cursor','pointer');});});jQuery('#save_design').click(function(e){jQuery('#setting_design_msg').fadeIn('slow');var customize_or_default=jQuery('#customize_design').val();var button_bg_color=jQuery('#button_bg_color').val();var button_bg_hover_color=jQuery('#button_bg_hover_color').val();var button_text_color=jQuery('#button_text_color').val();var add_to_cart_bg_color=jQuery('#add_to_cart_bg_color').val();var add_to_cart_bg_hover_color=jQuery('#add_cart_bg_hr_clr').val();var add_to_cart_text_color=jQuery('#add_to_cart_text_color').val();var add_to_cart_text_hover_color=jQuery('#add_to_cart_text_hover_color').val();var add_to_cart_padding=jQuery('#add_to_cart_padding').val();var tb_header_bg_color=jQuery('#tb_header_bg_color').val();var tb_header_border_color=jQuery('#tb_header_border_color').val();var tb_header_text_color=jQuery('#tb_header_text_color').val();var tb_header_border_width=jQuery('#tb_header_border_width').val();var tb_header_table_padding=jQuery('#tb_header_table_padding').val();var slct_algnment=jQuery('#slct_algnment').val();var tb_body_border_color=jQuery('#tb_body_border_color').val();var tb_body_text_color=jQuery('#tb_body_text_color').val();var tb_body_bg_color=jQuery('#tb_body_bg_color').val();var body_padding_of_td=jQuery('#body_padding_of_td').val();var tb_body_bg_hover_color=jQuery('#tb_body_bg_hover_color').val();var export_btns_bg_color=jQuery('#export_btns_bg_color').val();var export_btns_color=jQuery('#export_btns_color').val();var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'save_table_design_settings',customize_or_default:customize_or_default,tb_body_border_color:tb_body_border_color,tb_body_text_color:tb_body_text_color,button_bg_color:button_bg_color,button_bg_hover_color:button_bg_hover_color,button_text_color:button_text_color,add_to_cart_bg_color:add_to_cart_bg_color,add_to_cart_bg_hover_color:add_to_cart_bg_hover_color,add_to_cart_text_color:add_to_cart_text_color,add_to_cart_text_hover_color:add_to_cart_text_hover_color,add_to_cart_padding:add_to_cart_padding,tb_header_bg_color:tb_header_bg_color,tb_header_border_color:tb_header_border_color,tb_header_text_color:tb_header_text_color,tb_header_border_width:tb_header_border_width,tb_header_table_padding:tb_header_table_padding,slct_algnment:slct_algnment,tb_body_border_color:tb_body_border_color,tb_body_text_color:tb_body_text_color,tb_body_bg_color:tb_body_bg_color,body_padding_of_td:body_padding_of_td,tb_body_bg_hover_color:tb_body_bg_hover_color,export_btns_bg_color:export_btns_bg_color,export_btns_color:export_btns_color,},success:function(result){console.log('codes are '+result);},error:function(xhr,status,error){console.log(status);}});});jQuery('#variation_table_all_products, #excluded_categories').select2({placeholder:'Select a product'});jQuery(document).ready(function(){if(!jQuery('body').hasClass('single-product')){return;}
jQuery('#right_button').css('background-color','black');jQuery('#right_button').css('color','white');jQuery('div #my_own_table_filter label input').attr('placeholder','Search here...');var ajaxurl=ewcpm_php_vars.admin_url;jQuery.ajax({url:ajaxurl,type:'post',data:{dataType:'json',action:'get_table_design_values',},success:function(result){result=JSON.parse(result);console.log(result);var my_defualt_or_custom_selectBox=jQuery('#my_default_or_custom').val();if(my_defualt_or_custom_selectBox=='custom'){jQuery('#my_own_table td').css('color','#'+result['tb_body_text_color']);jQuery('.dt-buttons button').css('color','#'+result['export_btns_color']);jQuery('.dt-buttons button').css('background-color','#'+result['export_btns_bg_color']);jQuery('#my_own_table td').css('background-color','#'+result['tb_body_bg_color']);jQuery('#my_own_table th').css('color','#'+result['tb_header_text_color']);jQuery('#my_own_table th').css('border','1px solid #"'+result['tb_header_border_color']+'"');jQuery('#my_own_table th').css('background-color','#'+result['tb_header_bg_color']);jQuery('#my_own_table th').css('padding',result['tb_header_table_padding']+'px');jQuery('.add-to-cart-global span').css('color','#'+result['add_to_cart_text_color']);jQuery('.add-to-cart-global').css('background-color','#'+result['add_to_cart_bg_color']);jQuery('#right_button').css('color','#'+result['button_text_color']);jQuery('#right_button').css('background-color','#'+result['button_bg_color']);jQuery('#my_own_table').css('border','1px solid '+'#'+result['tb_body_border_color']);jQuery('.var_data .add_to_cart_button').css('padding',result['add_to_cart_padding']+'px');jQuery('#my_own_table th').css('text-align',result['slct_algnment']);jQuery('#my_own_table').hover(function(){jQuery('#my_own_table td').css('background-color','#'+result['tb_body_bg_hover_color']);},function(){if(result['tb_body_bg_color']!=''){jQuery('#my_own_table td').css('background-color','#'+result['tb_body_bg_color']);}else{jQuery('#my_own_table td').css('background-color','white');}});jQuery('#my_own_table .add-to-cart-global span').hover(function(){jQuery(this).css('color','#'+result['add_to_cart_text_hover_color']);},function(){if(result['add_to_cart_text_color']!=''){jQuery(this).css('color','#'+result['add_to_cart_text_color']);}else{jQuery(this).css('color','white');}});jQuery('.add-to-cart-global').hover(function(){jQuery(this).css('background-color','#'+result['add_to_cart_bg_hover_color']);},function(){if(result['add_to_cart_bg_color']!=''){jQuery(this).css('background-color','#'+result['add_to_cart_bg_color']);}else{jQuery(this).css('background-color','black');}});jQuery('#right_button').hover(function(){jQuery('#right_button').css('background-color','#'+result['button_bg_hover_color']);},function(){if(result['button_bg_color']!=''){jQuery('#right_button').css('background-color','#'+result['button_bg_color']);}else{jQuery('#right_button').css('background-color','black');}});}}});});jQuery('#fma_variation_table_exclude_by_prods_or_cats_slct_bx').on('change',function(){'use strict';var excludeWhat=jQuery(this).val();if(excludeWhat=='products_radio'){jQuery('#prods').show();jQuery('#cats').hide();}else if(excludeWhat=='categories_radio'){console.log('in else');jQuery('#cats').show();jQuery('#prods').hide();}});